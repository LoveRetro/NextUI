# tg5040 - Optimized for Allwinner A133P (Cortex-A53)
# -O3: Maximum optimization
# -Ofast: Aggressive optimizations (may affect precision slightly)
# -mcpu=cortex-a53: Target specific CPU for better instruction scheduling
# -mtune=cortex-a53: Optimize for Cortex-A53 pipeline
# -flto: Link-time optimization for better cross-module optimizations
# -ffast-math: Faster floating point (safe for games/UI)
# -funroll-loops: Unroll small loops for better performance
# -falign-functions=16: Align functions to cache line boundaries
# -falign-loops=4: Align loops for better instruction cache usage
ARCH = -O3 -Ofast
CFLAGS = -mcpu=cortex-a53 -mtune=cortex-a53 -march=armv8-a+simd -flto -ffast-math -funroll-loops -falign-functions=16 -falign-loops=4
SDL = SDL2
GL = GLES
# legacy linux paths
CFLAGS += -I$(PREFIX)/include -I$(PREFIX_LOCAL)/include
LDFLAGS = -L$(PREFIX)/lib -L$(PREFIX_LOCAL)/lib
# multiarch support
CFLAGS += -I$(PREFIX)/include/$(BUILD_ARCH)
LDFLAGS += -L$(PREFIX)/lib/$(BUILD_ARCH)
# pkg-config
CFLAGS += $$(pkg-config --cflags sdl2 glesv2)
LDFLAGS += $$(pkg-config --libs sdl2 glesv2)
# not handled by pkg-config
CFLAGS += -DUSE_$(SDL) -DUSE_$(GL) -DGL_GLEXT_PROTOTYPES
LDFLAGS += -l$(SDL)_image -l$(SDL)_ttf -lpthread -ldl -lm -lz
